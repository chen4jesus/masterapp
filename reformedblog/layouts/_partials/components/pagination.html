{{ $paginator := .Paginator }}
{{ $adjacent_links := 2 }}

{{ if gt $paginator.TotalPages 1 }}
<nav class="flex justify-center items-center gap-2.5 mt-10 mb-6 flex-wrap">

    <!-- Previous Page -->
    {{ if $paginator.HasPrev }}
    <a href="{{ $paginator.Prev.URL }}" class="flex items-center justify-center w-10 h-10 rounded-xl bg-[#f4f4f7] dark:bg-white/5 text-black dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 transition-all duration-300">
        <i class="fa-solid fa-chevron-left text-[10px]"></i>
    </a>
    {{ end }}

    <!-- Page Numbers -->
    {{ $last_printed := 0 }}
    {{ range $paginator.Pagers }}
        {{ $.Scratch.Set "page_number_flag" false }}

        {{ if or (eq .PageNumber 1) (eq .PageNumber $paginator.TotalPages) }}
            {{ $.Scratch.Set "page_number_flag" true }}
        {{ else if and (ge .PageNumber (sub $paginator.PageNumber $adjacent_links)) (le .PageNumber (add $paginator.PageNumber $adjacent_links)) }}
            {{ $.Scratch.Set "page_number_flag" true }}
        {{ end }}

        {{ if eq ($.Scratch.Get "page_number_flag") true }}
            {{ if gt .PageNumber (add $last_printed 1) }}
                <span class="flex items-center justify-center w-8 h-10 text-gray-400">...</span>
            {{ end }}

            {{ if eq . $paginator }}
                <span class="flex items-center justify-center w-10 h-10 rounded-xl bg-black dark:bg-white text-white dark:text-black font-bold shadow-md transition-all duration-300">
                    {{ .PageNumber }}
                </span>
            {{ else }}
                <a href="{{ .URL }}" class="flex items-center justify-center w-10 h-10 rounded-xl bg-[#f4f4f7] dark:bg-white/5 text-black dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 transition-all duration-300 font-bold">
                    {{ .PageNumber }}
                </a>
            {{ end }}

            {{ $last_printed = .PageNumber }}
        {{ end }}
    {{ end }}

    <!-- Next Page -->
    {{ if $paginator.HasNext }}
    <a href="{{ $paginator.Next.URL }}" class="flex items-center justify-center w-10 h-10 rounded-xl bg-[#f4f4f7] dark:bg-white/5 text-black dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-white/10 transition-all duration-300">
        <i class="fa-solid fa-chevron-right text-[10px]"></i>
    </a>
    {{ end }}
</nav>

<!-- Page Count Info -->
<p class="text-center text-sm text-[#999] font-medium opacity-80 mb-10">
    {{ T "total_articles" | default "共" }} {{ $paginator.TotalNumberOfElements }} {{ T "articles" | default "篇文章" }} • {{ T "page" | default "第" }} {{ $paginator.PageNumber }} / {{ $paginator.TotalPages }} {{ T "page_suffix" | default "页" }}
</p>
{{ end }}
